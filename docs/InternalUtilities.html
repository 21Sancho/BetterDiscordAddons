<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Namespace: InternalUtilities</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Namespace: InternalUtilities</h1>

    




<section>

<header>
    
        <h2>InternalUtilities</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>Functions and utilities relating to Discord's internals.
Some of the code used in this module is an editing version of
the Discord Internals library by samogot <a href="https://github.com/samogot/betterdiscord-plugins/">https://github.com/samogot/betterdiscord-plugins/</a>.
The documentation for <a href="InternalUtilities.html#.monkeyPatch">InternalUtilities.monkeyPatch</a> was 
also borrowed from him as it's quite thorough.</p></div>
        

        


<dl class="details">

    
    <dt class="tag-version">Version:</dt>
    <dd class="tag-version"><ul class="dummy"><li>0.0.2</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="PluginLibrary.js.html">PluginLibrary.js</a>, <a href="PluginLibrary.js.html#line694">line 694</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    
        <h3 class="subsection-title">Namespaces</h3>

        <dl>
            <dt><a href="InternalUtilities.Filters.html">Filters</a></dt>
            <dd></dd>
        
            <dt><a href="InternalUtilities.WebpackModules.html">WebpackModules</a></dt>
            <dd></dd>
        </dl>
    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id=".webContents"><span class="type-signature">(static) </span>webContents<span class="type-signature"></span></h4>




<div class="description">
    <p>Discord's Electron web contents.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="PluginLibrary.js.html">PluginLibrary.js</a>, <a href="PluginLibrary.js.html#line954">line 954</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id=".addInternalListener"><span class="type-signature">(static) </span>addInternalListener<span class="signature">(internalModule, moduleFunction, callback)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Adds a listener to funtions of internal modules. Especially useful for event based
actions where the data is less important.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>internalModule</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last"><p>module to patch</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>moduleFunction</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>name of the funtion to listen for</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="InternalUtilities.html#~listenerCallback">InternalUtilities~listenerCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>function to fire after the original function</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="PluginLibrary.js.html">PluginLibrary.js</a>, <a href="PluginLibrary.js.html#line916">line 916</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id=".addOnSwitchListener"><span class="type-signature">(static) </span>addOnSwitchListener<span class="signature">(callback)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Similar to <a href="PluginUtilities.html#.onSwitchObserver">PluginUtilities.onSwitchObserver</a> but this uses electron
web contents and not observers. This can be more efficient on worse systems
than the observer based method.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">callable</span>


            
            </td>

            

            

            <td class="description last"><p>basic callback to happen on channel switch</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="PluginLibrary.js.html">PluginLibrary.js</a>, <a href="PluginLibrary.js.html#line962">line 962</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id=".monkeyPatch"><span class="type-signature">(static) </span>monkeyPatch<span class="signature">(what, methodName, options)</span><span class="type-signature"> &rarr; {<a href="InternalUtilities.html#~cancelPatch">InternalUtilities~cancelPatch</a>}</span></h4>
    

    



<div class="description">
    <p>This function monkey-patches a method on an object. The patching callback may be run before, after or instead of target method.
Be careful when monkey-patching. Think not only about original functionality of target method and your changes, but also about developers of other plugins, who may also patch this method before or after you. Try to change target method behaviour as little as possible, and avoid changing method signatures.
By default, this function logs to the console whenever a method is patched or unpatched in order to aid debugging by you and other developers, but these messages may be suppressed with the <code>silent</code> option.
Display name of patched method is changed, so you can see if a function has been patched (and how many times) while debugging or in the stack trace. Also, patched methods have property <code>__monkeyPatched</code> set to <code>true</code>, in case you want to check something programmatically.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>what</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>Object to be patched. You can can also pass class prototypes to patch all class instances. If you are patching prototype of react component you may also need Renderer.rebindMethods.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>methodName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the target message to be patched.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>Options object. You should provide at least one of <code>before</code>, <code>after</code> or <code>instead</code> parameters. Other parameters are optional.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>before</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="InternalUtilities.html#~doPatchCallback">InternalUtilities~doPatchCallback</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Callback that will be called before original target method call. You can modify arguments here, so it will be passed to original method. Can be combined with <code>after</code>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>after</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="InternalUtilities.html#~doPatchCallback">InternalUtilities~doPatchCallback</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Callback that will be called after original target method call. You can modify return value here, so it will be passed to external code which calls target method. Can be combined with <code>before</code>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>instead</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="InternalUtilities.html#~doPatchCallback">InternalUtilities~doPatchCallback</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Callback that will be called instead of original target method call. You can get access to original method using <code>originalMethod</code> parameter if you want to call it, but you do not have to. Can't be combined with <code>before</code> and <code>after</code>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>once</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last"><p>Set to <code>true</code> if you want to automatically unpatch method after first call.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>silent</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last"><p>Set to <code>true</code> if you want to suppress log messages about patching and unpatching. Useful to avoid clogging the console in case of frequent conditional patching/unpatching, for example from another monkeyPatch callback.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>displayName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>You can provide meaningful name for class/object provided in <code>what</code> param for logging purposes. By default, this function will try to determine name automatically.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>forcePatch</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last"><p>Set to <code>true</code> to patch even if the function doesnt exist. (Adds noop function in place).</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="PluginLibrary.js.html">PluginLibrary.js</a>, <a href="PluginLibrary.js.html#line732">line 732</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Function with no arguments and no return value that should be called to cancel (unpatch) this patch. You should save and run it when your plugin is stopped.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="InternalUtilities.html#~cancelPatch">InternalUtilities~cancelPatch</a></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".removeInternalListener"><span class="type-signature">(static) </span>removeInternalListener<span class="signature">(internalModule, moduleFunction, callback)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Removes the internal listener</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>internalModule</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last"><p>module to unpatch</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>moduleFunction</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>name of the funtion to stop listening to</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="InternalUtilities.html#~listenerCallback">InternalUtilities~listenerCallback</a></span>


            
            </td>

            

            

            <td class="description last"><p>original callback to remove</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="PluginLibrary.js.html">PluginLibrary.js</a>, <a href="PluginLibrary.js.html#line940">line 940</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id=".removeOnSwitchListener"><span class="type-signature">(static) </span>removeOnSwitchListener<span class="signature">(callback)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Removes the listener added by <a href="InternalUtilities.html#.addOnSwitchListener">InternalUtilities.addOnSwitchListener</a>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">callable</span>


            
            </td>

            

            

            <td class="description last"><p>callback to remove from the listener list</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="PluginLibrary.js.html">PluginLibrary.js</a>, <a href="PluginLibrary.js.html#line970">line 970</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
    

    
        <h3 class="subsection-title">Type Definitions</h3>

        
                

    

    
    <h4 class="name" id="~cancelPatch"><span class="type-signature"></span>cancelPatch<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Function with no arguments and no return value that may be called to revert changes made by monkeyPatch method, restoring (unpatching) original method.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="PluginLibrary.js.html">PluginLibrary.js</a>, <a href="PluginLibrary.js.html#line696">line 696</a>
    </li></ul></dd>
    

    

    

    
</dl>


















            
                

    

    
    <h4 class="name" id="~doPatchCallback"><span class="type-signature"></span>doPatchCallback<span class="signature">(data)</span><span class="type-signature"> &rarr; {*}</span></h4>
    

    



<div class="description">
    <p>A callback that modifies method logic. This callback is called on each call of the original method and is provided all data about original call. Any of the data can be modified if necessary, but do so wisely.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="PatchData.html">PatchData</a></span>


            
            </td>

            

            

            <td class="description last"><p>Data object with information about current call and original method that you may need in your patching callback.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="PluginLibrary.js.html">PluginLibrary.js</a>, <a href="PluginLibrary.js.html#line707">line 707</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Makes sense only when used as <code>instead</code> parameter in monkeyPatch. If something other than <code>undefined</code> is returned, the returned value replaces the value of <code>data.returnValue</code>. If used as <code>before</code> or <code>after</code> parameters, return value is ignored.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">*</span>


    </dd>
</dl>

    





            
                

    

    
    <h4 class="name" id="~listenerCallback"><span class="type-signature"></span>listenerCallback<span class="signature">(data)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Fires after the desired internal function is fired.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="PatchData.html">PatchData</a></span>


            
            </td>

            

            

            <td class="description last"><p>the patch data from the internal patch</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="PluginLibrary.js.html">PluginLibrary.js</a>, <a href="PluginLibrary.js.html#line903">line 903</a>
    </li></ul></dd>
    

    

    

    
</dl>


















            
                

    

    
    <h4 class="name" id="~originalMethodCall"><span class="type-signature"></span>originalMethodCall<span class="signature">()</span><span class="type-signature"> &rarr; {*}</span></h4>
    

    



<div class="description">
    <p>This is a shortcut for calling original method using <code>this</code> and <code>arguments</code> from original call. This function accepts no arguments. This function is defined as <code>() =&gt; data.returnValue = data.originalMethod.apply(data.thisObject, data.methodArguments)</code></p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="PluginLibrary.js.html">PluginLibrary.js</a>, <a href="PluginLibrary.js.html#line701">line 701</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The same value, which is returned from original method, also this value would be written into <code>data.returnValue</code></p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">*</span>


    </dd>
</dl>

    





            
    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="DiscordPermissions.html">DiscordPermissions</a></li><li><a href="DOMUtilities.ClassName.html">ClassName</a></li><li><a href="DOMUtilities.Selector.html">Selector</a></li><li><a href="Patcher.html">Patcher</a></li><li><a href="PluginContextMenu.ImageItem.html">ImageItem</a></li><li><a href="PluginContextMenu.ItemGroup.html">ItemGroup</a></li><li><a href="PluginContextMenu.Menu.html">Menu</a></li><li><a href="PluginContextMenu.MenuItem.html">MenuItem</a></li><li><a href="PluginContextMenu.SubMenuItem.html">SubMenuItem</a></li><li><a href="PluginContextMenu.TextItem.html">TextItem</a></li><li><a href="PluginContextMenu.ToggleItem.html">ToggleItem</a></li><li><a href="PluginSettings.Checkbox.html">Checkbox</a></li><li><a href="PluginSettings.ColorPicker.html">ColorPicker</a></li><li><a href="PluginSettings.ControlGroup.html">ControlGroup</a></li><li><a href="PluginSettings.PillButton.html">PillButton</a></li><li><a href="PluginSettings.SettingField.html">SettingField</a></li><li><a href="PluginSettings.Slider.html">Slider</a></li><li><a href="PluginSettings.Textbox.html">Textbox</a></li><li><a href="PluginTooltip.Native.html">Native</a></li><li><a href="PluginTooltip.Tooltip.html">Tooltip</a></li></ul><h3>Namespaces</h3><ul><li><a href="ColorUtilities.html">ColorUtilities</a></li><li><a href="DiscordClasses.html">DiscordClasses</a></li><li><a href="DiscordClassModules.html">DiscordClassModules</a></li><li><a href="DiscordModules.html">DiscordModules</a></li><li><a href="DiscordSelectors.html">DiscordSelectors</a></li><li><a href="DOMUtilities.html">DOMUtilities</a></li><li><a href="GeneralUtilities.html">GeneralUtilities</a></li><li><a href="InternalUtilities.html">InternalUtilities</a></li><li><a href="InternalUtilities.Filters.html">Filters</a></li><li><a href="InternalUtilities.WebpackModules.html">WebpackModules</a></li><li><a href="PluginContextMenu.html">PluginContextMenu</a></li><li><a href="PluginSettings.html">PluginSettings</a></li><li><a href="PluginTooltip.html">PluginTooltip</a></li><li><a href="PluginUpdateUtilities.html">PluginUpdateUtilities</a></li><li><a href="PluginUtilities.html">PluginUtilities</a></li><li><a href="ReactUtilities.html">ReactUtilities</a></li></ul><h3>Interfaces</h3><ul><li><a href="PatchData.html">PatchData</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue May 08 2018 17:38:10 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>